{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","pagSiguiente","pagAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","fechasPasadas","horaCita","seccionAnterior","document","querySelector","classList","remove","tabAnterior","add","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","divServicio","idServicio","appendChild","onclick","seleccionarServicio","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","paginaSiguiente","paginaAnterior","resumenDIv","firstChild","removeChild","Object","values","includes","noServicios","headingCita","innerHTML","serviciosCita","headingServicios","cantidad","contenedorServicio","textoServicio","totalServicio","split","trim","cantidadPagar","filter","serviciosObj","nombreText","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaCIta","Date","getUTCDay","opciones","weekday","day","year","month","inputFecha","fechaAhora","getFullYear","getMonth","getDate","fechaDeshabilitar","min","inputHora"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\n\nconst cita = {\n    nombre: '',\n    fecha: '',\n    hora: '',\n    servicios: []\n\n}\n\ndocument.addEventListener('DOMContentLoaded', function(){\n    iniciarApp();\n\n});\n\nfunction iniciarApp(){\n    mostrarServicios();\n\n    //Resalta el div actual segun al que se presiona \n    mostrarSeccion();\n\n    //Oculta o muestra la seccion segun el tab que se presiona \n    cambiarSeccion();\n\n    //Paginacion siguiente y anterior\n    pagSiguiente();\n    pagAnterior();\n\n    //Compruba la pagina actual para mostrar o eliminar la paginacion\n    botonesPaginador();\n\n    //Muestra resumen de la cita o mensaje de error\n    mostrarResumen();\n\n    //Almacena el nombre de la cita\n    nombreCita();\n\n    //Almacena la fecha de la cita\n    fechaCita();\n\n    //Deshabilitar fechas pasadas\n    fechasPasadas();\n\n    //ALmacenar hora de la cita\n    horaCita();\n}\n\nfunction mostrarSeccion(){\n\n    //Eliminar seccion aterior\n    const seccionAnterior = document.querySelector('.mostrar-seccion');\n    if(seccionAnterior){\n        seccionAnterior.classList.remove('mostrar-seccion');\n    }\n\n    //Elinar la clase actual del tab anterior\n    const tabAnterior = document.querySelector(\".tabs .actual\");\n    if(tabAnterior){\n        tabAnterior.classList.remove(\"actual\");\n    }\n    \n    const seccionActual = document.querySelector(`#paso-${pagina}`);\n    seccionActual.classList.add('mostrar-seccion');\n\n    //Resaltar tab actual\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\n    tab.classList.add(\"actual\");\n}\n\n\nfunction cambiarSeccion(){\n    const enlaces = document.querySelectorAll(\".tabs button\");\n\n    enlaces.forEach(enlace => {\n        enlace.addEventListener(\"click\", e =>{\n            e.preventDefault();\n\n            pagina = parseInt(e.target.dataset.paso);\n\n            mostrarSeccion();\n            botonesPaginador();\n        });\n    });\n}\n\nasync function mostrarServicios(){\n    try {\n        const resultado = await fetch('./servicios.json');\n        const db = await resultado.json();\n\n        const { servicios } = db;\n\n        //Generar el HTML\n        servicios.forEach(servicio => {\n            const { id, nombre, precio } = servicio;\n\n            //DOM Scripting\n\n\n            //Generar nombre servicio\n            const nombreServicio = document.createElement('P');\n            nombreServicio.textContent = nombre;\n            nombreServicio.classList.add('nombre-servicio');\n\n            //Generar precio servicio\n            const precioServicio = document.createElement('P');\n            precioServicio.textContent = '$' + precio;\n            precioServicio.classList.add('precio-servicio');\n\n            //Generar div contenedor\n            const divServicio = document.createElement('DIV');\n            divServicio.classList.add('servicio');\n            divServicio.dataset.idServicio = id;\n\n\n            //Inyectar precio y nombre al div\n            divServicio.appendChild(nombreServicio);\n            divServicio.appendChild(precioServicio);\n\n            //Inyectar en HTML\n            document.querySelector('#servicio').appendChild(divServicio);\n\n\n            //Selecciona un servicio\n            divServicio.onclick = seleccionarServicio;\n        });\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nfunction seleccionarServicio(e){\n    let elemento;\n\n    if(e.target.tagName === \"P\"){\n        elemento = e.target.parentElement;\n    }else{\n        elemento = e.target;\n    }\n\n    if(elemento.classList.contains(\"seleccionado\")){\n        elemento.classList.remove(\"seleccionado\");\n\n        const id = parseInt(elemento.dataset.idServicio);\n\n        eliminarServicio(id);\n    }else{\n        elemento.classList.add(\"seleccionado\");\n\n        const serviciosObj = {\n            id: parseInt(elemento.dataset.idServicio),\n            nombre: elemento.firstElementChild.textContent,\n            precio: elemento.firstElementChild.nextElementSibling.textContent\n        }\n\n        //console.log(serviciosObj);\n        agregarServicio(serviciosObj);\n    }\n    \n}\n\nfunction pagSiguiente(){\n    const paginaSiguiente = document.querySelector(\"#siguiente\");\n\n    paginaSiguiente.addEventListener(\"click\", () =>{\n        pagina++;\n\n        botonesPaginador();\n    });\n}\n\nfunction pagAnterior(){\n    const paginaAnterior = document.querySelector(\"#anterior\");\n\n    paginaAnterior.addEventListener(\"click\", () =>{\n        pagina--;\n\n        botonesPaginador();\n    });\n\n}\n\nfunction botonesPaginador(){\n    const paginaSiguiente = document.querySelector(\"#siguiente\");\n    const paginaAnterior = document.querySelector(\"#anterior\");\n\n    if(pagina === 1){\n        paginaAnterior.classList.add(\"ocultar\");\n    }else if(pagina === 3){\n        paginaAnterior.classList.remove(\"ocultar\");\n        paginaSiguiente.classList.add(\"ocultar\");\n        mostrarResumen();\n    }else{\n        paginaSiguiente.classList.remove(\"ocultar\");\n        paginaAnterior.classList.remove(\"ocultar\");\n    }\n\n    //Cambia la seccion que se muestra por la de la pag\n    mostrarSeccion(); \n\n}\n\nfunction mostrarResumen(){\n    //Destructuring\n    const {nombre, fecha, hora, servicios} = cita;\n\n    //Seleccionar resumen\n    const resumenDIv = document.querySelector(\".contenido-resumen\");\n\n    //Limpiar HTML previo\n    while(resumenDIv.firstChild){\n        resumenDIv.removeChild(resumenDIv.firstChild);\n    }\n\n\n    //Validacion objeto\n    if(Object.values(cita).includes(\"\")){\n        const noServicios = document.createElement(\"P\");\n        noServicios.textContent = \"Faltan datos del nombre, fecha, hora o servicios\";\n        noServicios.classList.add(\"invalidar-cita\");\n\n        //Agregar a resumen div\n        resumenDIv.appendChild(noServicios);\n\n        return;\n    }\n\n\n    const headingCita = document.createElement(\"H3\");\n    headingCita.textContent = \"Resumen de Cita\";\n\n    //Mostrar resumen\n    const nombreCita = document.createElement(\"P\");\n    nombreCita.innerHTML = `<span>Nombre: </span> ${nombre}`;\n\n    const fechaCita = document.createElement(\"P\");\n    fechaCita.innerHTML = `<span>Fecha: </span> ${fecha}`;\n\n    const horaCita = document.createElement(\"P\");\n    horaCita.innerHTML = `<span>Hora: </span> ${hora}`;\n\n    const serviciosCita = document.createElement(\"DIV\");\n    serviciosCita.classList.add(\"resumen-servicios\"); \n\n    const headingServicios = document.createElement(\"H3\");\n    headingServicios.textContent = \"Resumen de Servicios\";\n    serviciosCita.appendChild(headingServicios);\n\n    let cantidad = 0;\n    //Iterar en los servicios \n    servicios.forEach(servicio => {\n        const { nombre, precio } = servicio;\n        const contenedorServicio = document.createElement(\"DIV\");\n        contenedorServicio.classList.add(\"contenedor-servicio\");\n\n        const textoServicio = document.createElement(\"P\");\n        textoServicio.textContent = nombre;\n\n        const precioServicio = document.createElement(\"P\");\n        precioServicio.classList.add(\"precio\");\n        precioServicio.textContent = precio;\n\n        //Colocar nombre y precio \n        contenedorServicio.appendChild(textoServicio);\n        contenedorServicio.appendChild(precioServicio);\n\n        serviciosCita.appendChild(contenedorServicio);\n\n        const totalServicio = precio.split(\"$\");\n        cantidad += parseInt(totalServicio[1].trim());\n\n        console.log(precio);\n\n    });\n    console.log(cantidad);\n    resumenDIv.appendChild(headingCita);\n    resumenDIv.appendChild(nombreCita);\n    resumenDIv.appendChild(fechaCita);\n    resumenDIv.appendChild(horaCita);\n    resumenDIv.appendChild(serviciosCita);\n\n    const cantidadPagar = document.createElement(\"P\");\n    cantidadPagar.classList.add(\"total\");\n    cantidadPagar.innerHTML = `<span>Total a pagar: </span>$${cantidad}`;\n    resumenDIv.appendChild(cantidadPagar);\n}    \n\nfunction eliminarServicio(id){\n    const {servicios} = cita;\n    cita.servicios = servicios.filter( servicio => servicio.id !== id);\n}\n\nfunction agregarServicio(serviciosObj){\n    const {servicios} = cita;\n\n    cita.servicios = [...servicios, serviciosObj];\n}\n\nfunction nombreCita(){\n    const nombreInput = document.querySelector(\"#nombre\");\n    nombreInput.addEventListener(\"input\", e => {\n        const nombreText = e.target.value.trim(); //trim elimina los espacios en blanco\n\n        //validar el input nombre\n        if(nombreText === \"\" || nombreText.length < 3){\n            mostrarAlerta(\"Nombre no valido\", \"error\");\n        }else{\n            const alerta = document.querySelector(\".alerta\");\n            if(alerta){\n                alerta.remove();\n            }\n\n            cita.nombre = nombreText;\n        }\n    });\n}\n\nfunction mostrarAlerta(mensaje, tipo){\n\n    //Si existe una alerta, no cree otra\n    const alertaprevia = document.querySelector(\".alerta\");\n    if(alertaprevia){\n        return;\n    }\n\n    const alerta = document.createElement(\"DIV\");\n    alerta.textContent = mensaje;\n    alerta.classList.add(\"alerta\");\n\n    if(tipo == \"error\"){\n        alerta.classList.add(\"error\");\n    }\n\n    //Insertar en el HTML\n    const formulario = document.querySelector(\".formulario\");\n    formulario.appendChild(alerta);\n\n    //ELiminar alerta despues de x tiempo\n    setTimeout(() => {\n        alerta.remove();    \n    }, 3000);\n\n\n}\n\nfunction fechaCita(){\n    const fechaCIta = document.querySelector(\"#fecha\");\n    fechaCIta.addEventListener(\"input\", e => {\n        const fecha = new Date(e.target.value).getUTCDay();\n\n        if([0, 6].includes(fecha)){\n            e.preventDefault();\n            fechaCIta.value = \"\";\n            mostrarAlerta(\"Los fines de semana no hay servicio.\", \"error\");\n        }else{\n\n            //Fecha mas especifica\n            const fechaCompleta = new Date(e.target.value);\n            opciones = {\n                weekday: \"long\",\n                day: \"numeric\",\n                year: \"numeric\",\n                month: \"long\"\n            }\n            //console.log(fechaCompleta.toLocaleDateString(\"es-ES\", opciones));\n\n            cita.fecha = fechaCIta.value;\n        }\n\n    });\n    \n}\n\nfunction fechasPasadas(){\n    const inputFecha = document.querySelector(\"#fecha\");\n    const fechaAhora = new Date();\n\n    const year = fechaAhora.getFullYear();\n    const month = fechaAhora.getMonth() + 1;\n    const day = fechaAhora.getDate();\n\n    //formato fecha: DD-MM-YYYY\n    if(month < 10){\n        const fechaDeshabilitar = `${year}-0${month}-${day}`;\n        inputFecha.min = fechaDeshabilitar;\n    }else{\n        const fechaDeshabilitar = `${year}-${month}-${day}`;\n        inputFecha.min = fechaDeshabilitar;\n    }\n\n\n}\n\nfunction horaCita(){\n    const inputHora = document.querySelector(\"#hora\");\n    inputHora.addEventListener(\"input\", e => {\n        const horaCita = e.target.value;\n        const hora = horaCita.split(\":\")\n\n        if(hora[0] < 09 || hora [0] > 22){\n            e.preventDefault();\n            inputHora.value = \"\";\n            cita.hora = \"\";\n            mostrarAlerta(\"Hora no valida\", \"error\");\n\n        }else{\n            cita.hora = horaCita;\n        }\n    });\n}"]}